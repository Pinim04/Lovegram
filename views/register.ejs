<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/form.css' />
    <link rel='stylesheet' href='/stylesheets/formRegister.css' />
  </head>
  <body> 
    <div class="container">
      <div class="titolo">Registrati</div>
      <img src="Images/sfondoreg.jpg" alt="Immagine di registrazione" id="preview" src="#" />
      <input type="file" id="image-input" accept="image/*" onchange="previewImage(event)" class="immagine">
      <button onclick="selectFile()" class="bottone" id="bottone">+</button>
      <script>
        var bottone = document.getElementById("bottone");
        bottone.addEventListener("click", function()
        {
          bottone.classList.add("hidden");
        });
      </script>
      <div class="page active" id="page1">
        <form>
          <label for="nome">Username:</label>
          <input type="text" id="username" maxlength="25" minlength="2" required>
          <button type="button" onclick="procedi(2)">Avanti</button>
        </form>
      </div>
      
      <div class="page" id="page2">
        <form>
          <label for="cognome">Nome:</label>
          <input type="text" id="nome" maxlength="25" minlength="2" required>
          <button type="button" onclick="procedi(3)">Avanti</button>
        </form>
      </div>
      
      <div class="page" id="page3">
        <form>
          <label for="data-nascita">Cognome</label>
          <input type="text" id="cognome" maxlength="25" minlength="2" required>
          <button type="button" onclick="procedi(4)">Avanti</button>
        </form>
      </div>
      
      <div class="page" id="page4">
        <form>
          <label for="email">Email:</label>
          <input type="email" id="email" maxlength="30" min="10" required>
          <button type="button" onclick="procedi(5)">Avanti</button>
        </form>
      </div>

      <div class="page" id="page5">
        <form>
          <label for="password">Password:</label>
          <input type="password" id="password" maxlength="30" minlength="5" required>
          <button type="button" onclick="procedi(6)">Avanti</button>
        </form>
      </div>
      
      <div class="page" id="page6">
        <form>
          <label for="password">Conferma Password:</label>
          <input type="password" id="conferma-password" maxlength="30" minlength="5" required>
          <button type="button" onclick="procedi(7)">Avanti</button>
        </form>
      </div>

      <div class="page" id="page7">
        <form>
          <label for="sesso">Sesso:</label>
          <select id="sesso" name="sesso" required>
            <option value="maschio">Maschio</option>
            <option value="femmina">Femmina</option>
            <option value="altro">Altro</option>
          </select>
          <button type="button" onclick="procedi(8)">Avanti</button>
        </form>
      </div>

      <div class="page" id="page8">
        <form>
          <label for="citta">Città:</label>
          <input type="text" id="citta" maxlength="30" minlength="5" required>
          <button type="button" onclick="procedi(9)">Avanti</button>
        </form>
      </div>

      <div class="page" id="page9">
        <form>
          <label for="citta">Città:</label>
          <input type="date" id="data-nascita" min="1970-01-01" max="2023-12-31" required>
          <button type="submit">Registrati</button>
        </form>
      </div>

    </div>
    
    <script>
      let currentPage = 1;
      
      function procedi(page) {
        switch (page) {
          case 2:
            var username = document.getElementById("username").value;
            if (username.length < 2 || username.length > 30) {
              window.alert("i campi non sono validi");
              break;
            } else{
              vaiavanti(page);
            }
          case 3:
            var nome = document.getElementById("nome").value;
            if (nome.length < 2 || nome.length > 30) {
              window.alert("i campi non sono validi");
            }
              default:
            break;
        }        
      }

      function vaiavanti(page) {
          document.getElementById(`page${currentPage}`).classList.remove('active');
          currentPage = page;
          document.getElementById(`page${currentPage}`).classList.add('active');
        }

      function selectFile() {
        document.getElementById('image-input').click();
      }

      document.getElementById('image-input').addEventListener('change', function(e) {
      var file = e.target.files[0];
      var reader = new FileReader();

      reader.onload = function(e) {
        document.getElementById('preview').src = e.target.result;
      }

      reader.readAsDataURL(file);
      });

      var username = document.getElementById("username").value;
      var nome = document.getElementById("nome").value;
      var cognome = document.getElementById("cognome").value;
      var email = document.getElementById("email").value;
      var password = document.getElementById("password").value;
      var cpassword = document.getElementById("conferma-password").value;
      var sesso = document.getElementById("sesso").value;
      var citta = document.getElementById("citta").value;
      var dnascita = document.getElementById("data.nascita").value;

    </script>
  </body>
</html>
